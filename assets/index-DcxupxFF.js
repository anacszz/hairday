(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))m(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&m(l)}).observe(document,{childList:!0,subtree:!0});function h(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function m(i){if(i.ep)return;i.ep=!0;const d=h(i);fetch(i.href,d)}})();function fe(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var P={exports:{}},he=P.exports,ee;function ae(){return ee||(ee=1,(function(c,u){(function(h,m){c.exports=m()})(he,(function(){var h=1e3,m=6e4,i=36e5,d="millisecond",l="second",b="minute",T="hour",w="day",I="week",D="month",K="quarter",L="year",x="date",Q="Invalid Date",ue=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ce=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,de={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var n=["th","st","nd","rd"],e=s%100;return"["+s+(n[(e-20)%10]||n[e]||n[0])+"]"}},z=function(s,n,e){var r=String(s);return!r||r.length>=n?s:""+Array(n+1-r.length).join(e)+s},le={s:z,z:function(s){var n=-s.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+z(r,2,"0")+":"+z(t,2,"0")},m:function s(n,e){if(n.date()<e.date())return-s(e,n);var r=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(r,D),o=e-t<0,a=n.clone().add(r+(o?-1:1),D);return+(-(r+(e-t)/(o?t-a:a-t))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:D,y:L,w:I,d:w,D:x,h:T,m:b,s:l,ms:d,Q:K}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},j="en",H={};H[j]=de;var G="$isDayjsObject",F=function(s){return s instanceof q||!(!s||!s[G])},k=function s(n,e,r){var t;if(!n)return j;if(typeof n=="string"){var o=n.toLowerCase();H[o]&&(t=o),e&&(H[o]=e,t=o);var a=n.split("-");if(!t&&a.length>1)return s(a[0])}else{var p=n.name;H[p]=n,t=p}return!r&&t&&(j=t),t||!r&&j},$=function(s,n){if(F(s))return s.clone();var e=typeof n=="object"?n:{};return e.date=s,e.args=arguments,new q(e)},f=le;f.l=k,f.i=F,f.w=function(s,n){return $(s,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var q=(function(){function s(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[G]=!0}var n=s.prototype;return n.parse=function(e){this.$d=(function(r){var t=r.date,o=r.utc;if(t===null)return new Date(NaN);if(f.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var a=t.match(ue);if(a){var p=a[2]-1||0,y=(a[7]||"0").substring(0,3);return o?new Date(Date.UTC(a[1],p,a[3]||1,a[4]||0,a[5]||0,a[6]||0,y)):new Date(a[1],p,a[3]||1,a[4]||0,a[5]||0,a[6]||0,y)}}return new Date(t)})(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return f},n.isValid=function(){return this.$d.toString()!==Q},n.isSame=function(e,r){var t=$(e);return this.startOf(r)<=t&&t<=this.endOf(r)},n.isAfter=function(e,r){return $(e)<this.startOf(r)},n.isBefore=function(e,r){return this.endOf(r)<$(e)},n.$g=function(e,r,t){return f.u(e)?this[r]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,r){var t=this,o=!!f.u(r)||r,a=f.p(e),p=function(E,M){var O=f.w(t.$u?Date.UTC(t.$y,M,E):new Date(t.$y,M,E),t);return o?O:O.endOf(w)},y=function(E,M){return f.w(t.toDate()[E].apply(t.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(M)),t)},g=this.$W,v=this.$M,_=this.$D,C="set"+(this.$u?"UTC":"");switch(a){case L:return o?p(1,0):p(31,11);case D:return o?p(1,v):p(0,v+1);case I:var Y=this.$locale().weekStart||0,N=(g<Y?g+7:g)-Y;return p(o?_-N:_+(6-N),v);case w:case x:return y(C+"Hours",0);case T:return y(C+"Minutes",1);case b:return y(C+"Seconds",2);case l:return y(C+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,r){var t,o=f.p(e),a="set"+(this.$u?"UTC":""),p=(t={},t[w]=a+"Date",t[x]=a+"Date",t[D]=a+"Month",t[L]=a+"FullYear",t[T]=a+"Hours",t[b]=a+"Minutes",t[l]=a+"Seconds",t[d]=a+"Milliseconds",t)[o],y=o===w?this.$D+(r-this.$W):r;if(o===D||o===L){var g=this.clone().set(x,1);g.$d[p](y),g.init(),this.$d=g.set(x,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](y);return this.init(),this},n.set=function(e,r){return this.clone().$set(e,r)},n.get=function(e){return this[f.p(e)]()},n.add=function(e,r){var t,o=this;e=Number(e);var a=f.p(r),p=function(v){var _=$(o);return f.w(_.date(_.date()+Math.round(v*e)),o)};if(a===D)return this.set(D,this.$M+e);if(a===L)return this.set(L,this.$y+e);if(a===w)return p(1);if(a===I)return p(7);var y=(t={},t[b]=m,t[T]=i,t[l]=h,t)[a]||1,g=this.$d.getTime()+e*y;return f.w(g,this)},n.subtract=function(e,r){return this.add(-1*e,r)},n.format=function(e){var r=this,t=this.$locale();if(!this.isValid())return t.invalidDate||Q;var o=e||"YYYY-MM-DDTHH:mm:ssZ",a=f.z(this),p=this.$H,y=this.$m,g=this.$M,v=t.weekdays,_=t.months,C=t.meridiem,Y=function(M,O,A,B){return M&&(M[O]||M(r,o))||A[O].slice(0,B)},N=function(M){return f.s(p%12||12,M,"0")},E=C||function(M,O,A){var B=M<12?"AM":"PM";return A?B.toLowerCase():B};return o.replace(ce,(function(M,O){return O||(function(A){switch(A){case"YY":return String(r.$y).slice(-2);case"YYYY":return f.s(r.$y,4,"0");case"M":return g+1;case"MM":return f.s(g+1,2,"0");case"MMM":return Y(t.monthsShort,g,_,3);case"MMMM":return Y(_,g);case"D":return r.$D;case"DD":return f.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return Y(t.weekdaysMin,r.$W,v,2);case"ddd":return Y(t.weekdaysShort,r.$W,v,3);case"dddd":return v[r.$W];case"H":return String(p);case"HH":return f.s(p,2,"0");case"h":return N(1);case"hh":return N(2);case"a":return E(p,y,!0);case"A":return E(p,y,!1);case"m":return String(y);case"mm":return f.s(y,2,"0");case"s":return String(r.$s);case"ss":return f.s(r.$s,2,"0");case"SSS":return f.s(r.$ms,3,"0");case"Z":return a}return null})(M)||a.replace(":","")}))},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,r,t){var o,a=this,p=f.p(r),y=$(e),g=(y.utcOffset()-this.utcOffset())*m,v=this-y,_=function(){return f.m(a,y)};switch(p){case L:o=_()/12;break;case D:o=_();break;case K:o=_()/3;break;case I:o=(v-g)/6048e5;break;case w:o=(v-g)/864e5;break;case T:o=v/i;break;case b:o=v/m;break;case l:o=v/h;break;default:o=v}return t?o:f.a(o)},n.daysInMonth=function(){return this.endOf(D).$D},n.$locale=function(){return H[this.$L]},n.locale=function(e,r){if(!e)return this.$L;var t=this.clone(),o=k(e,r,!0);return o&&(t.$L=o),t},n.clone=function(){return f.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},s})(),X=q.prototype;return $.prototype=X,[["$ms",d],["$s",l],["$m",b],["$H",T],["$W",w],["$M",D],["$y",L],["$D",x]].forEach((function(s){X[s[1]]=function(n){return this.$g(n,s[0],s[1])}})),$.extend=function(s,n){return s.$i||(s(n,q,$),s.$i=!0),$},$.locale=k,$.isDayjs=F,$.unix=function(s){return $(1e3*s)},$.en=H[j],$.Ls=H,$.p={},$}))})(P)),P.exports}var me=ae();const S=fe(me);var U={exports:{}},pe=U.exports,te;function ye(){return te||(te=1,(function(c,u){(function(h,m){c.exports=m(ae())})(pe,(function(h){function m(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var i=m(h),d={name:"pt-br",weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(l){return l+"º"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"}};return i.default.locale(d,null,!0),d}))})(U)),U.exports}ye();S.locale("pt-br");const Z={baseURL:"http://localhost:3333"};async function $e({id:c,name:u,when:h}){try{await fetch(`${Z.baseURL}/schedules`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u,when:h})}),alert("Agendamento realizado com sucesso!")}catch(m){console.log(m),alert("Não foi possível agendar. Tente novamente mais tarde.")}}async function ge({date:c}){try{return(await(await fetch(`${Z.baseURL}/schedules`)).json()).filter(i=>S(c).isSame(i.when,"day"))}catch(u){console.log(u),alert("Não foi possível buscar os agendamentos do dia selecionado.")}}const ne=document.getElementById("period-morning"),re=document.getElementById("period-afternoon"),se=document.getElementById("period-night");function ve({dailySchedules:c}){try{ne.innerHTML="",re.innerHTML="",se.innerHTML="",c.forEach(u=>{const h=document.createElement("li"),m=document.createElement("strong"),i=document.createElement("span");h.setAttribute("data-id",u.id),m.textContent=S(u.when).format("HH:mm"),i.textContent=u.name;const d=document.createElement("img");d.classList.add("cancel-icon"),d.setAttribute("src","/assets/cancel.svg"),d.setAttribute("alt","Cancelar"),h.append(m,i,d);const l=S(u.when).hour();l<=12?ne.appendChild(h):l>12&&l<=18?re.appendChild(h):se.appendChild(h)})}catch(u){alert("Não foi possível exibir os agendamentos."),console.log(u)}}const Me=["9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00"];function _e(){const c=document.querySelectorAll(".hour-available");c.forEach(u=>{u.addEventListener("click",h=>{c.forEach(m=>{m.classList.remove("hour-selected")}),h.target.classList.add("hour-selected")})})}const J=document.getElementById("hours");function De({date:c,dailySchedules:u}){J.innerHTML="";const h=u.map(i=>S(i.when).format("HH:mm"));Me.map(i=>{const[d]=i.split(":"),l=S(c).add(d,"hour").isBefore(S()),b=!h.includes(i)&&!l;return{hour:i,available:b}}).forEach(({hour:i,available:d})=>{const l=document.createElement("li");l.classList.add("hour"),l.classList.add(d?"hour-available":"hour-unavailable"),l.textContent=i,i==="9:00"?R("Manhã"):i==="13:00"?R("Tarde"):i==="18:00"&&R("Noite"),J.append(l)}),_e()}function R(c){const u=document.createElement("li");u.classList.add("hour-period"),u.textContent=c,J.append(u)}const Se=document.getElementById("date");async function W(){const c=Se.value,u=await ge({date:c});ve({dailySchedules:u}),De({date:c,dailySchedules:u})}const be=document.querySelector("form"),oe=document.getElementById("client"),V=document.getElementById("date"),ie=S(new Date).format("YYYY-MM-DD");V.value=ie;V.min=ie;be.onsubmit=async c=>{c.preventDefault();try{const u=oe.value.trim();if(!u)return alert("Informe o nome do cliente!");const h=document.querySelector(".hour-selected");if(!h)return alert("Selecione a hora.");const[m]=h.innerText.split(":"),i=S(V.value).add(m,"hour"),d=new Date().getTime();await $e({id:d,name:u,when:i}),await W(),oe.value=""}catch(u){alert("Não foi possível realizar o agendamento."),console.log(u)}};const we=document.getElementById("date");we.onchange=()=>W();async function Le({id:c}){try{await fetch(`${Z.baseURL}/schedules/${c}`,{method:"DELETE"}),alert("Agendamento cancelado com sucesso!")}catch(u){console.log(u),alert("Não foi possível cancelar o agendamento.")}}const Oe=document.querySelectorAll(".period");Oe.forEach(c=>{c.addEventListener("click",async u=>{if(u.target.classList.contains("cancel-icon")){const h=u.target.closest("li"),{id:m}=h.dataset;m&&confirm("Tem certeza que deseja cancelar o agendamento?")&&(await Le({id:m}),W())}})});document.addEventListener("DOMContentLoaded",function(){W()});
